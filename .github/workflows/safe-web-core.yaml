on:
  push:
    branches:
      - main
jobs:
  env_vars:
    runs-on: ubuntu-latest
    outputs:
      SAFE_WEB_CORE_VERSION: ${{ steps.env-file.outputs.SAFE_WEB_CORE_VERSION }}
    steps:
      - uses: actions/checkout@v3
      - name: Use env file
        id: env-file
        run: grep -v '#' .env | tee $GITHUB_OUTPUT
  version_outputs:
    runs-on: ubuntu-latest
    needs: env_vars
    steps:
      - uses: actions/checkout@v3
      - name: Output safe-global/web-core version
        run: echo ${{ needs.env_vars.outputs.SAFE_WEB_CORE_VERSION }}
  checkout:
    runs-on: ubuntu-latest
    needs: env_vars
    steps:
      - uses: actions/checkout@v3
      - name: Checkout safe-global/web-core repo tag ${{ needs.env_vars.outputs.SAFE_WEB_CORE_VERSION }}
        uses: actions/checkout@v3
        with:
          repository: safe-global/web-core
          path: web-core
          ref: ${{ needs.env_vars.outputs.SAFE_WEB_CORE_VERSION }}
      - run: ls -al
